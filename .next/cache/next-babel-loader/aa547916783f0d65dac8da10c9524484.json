{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/bartosz/Pulpit/inz/my-app/src/components/layout/forms/Form/component.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from 'react';\nimport { Formik } from 'formik';\nimport StyledComponent from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar LayoutFormsForm = /*#__PURE__*/function (_Component) {\n  _inherits(LayoutFormsForm, _Component);\n\n  var _super = _createSuper(LayoutFormsForm);\n\n  function LayoutFormsForm() {\n    var _this;\n\n    _classCallCheck(this, LayoutFormsForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      errorMessage: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, formikHelpers) {\n        var _this$props, submitAction, onSubmitData, onSuccess, onError, response, _error$payload;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props = _this.props, submitAction = _this$props.submitAction, onSubmitData = _this$props.onSubmitData, onSuccess = _this$props.onSuccess, onError = _this$props.onError;\n                _context.prev = 1;\n                _context.next = 4;\n                return submitAction(_objectSpread({}, onSubmitData(values)));\n\n              case 4:\n                response = _context.sent;\n                return _context.abrupt(\"return\", onSuccess(response, formikHelpers));\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(_context.t0);\n\n                if (Object.keys(_context.t0 === null || _context.t0 === void 0 ? void 0 : (_error$payload = _context.t0.payload) === null || _error$payload === void 0 ? void 0 : _error$payload.validationErrors).length > 0) {\n                  formikHelpers.setErrors(_context.t0.payload.validationErrors);\n                } else {\n                  _this.setState(function (prevState) {\n                    return _objectSpread(_objectSpread({}, prevState), {}, {\n                      errorMessage: 'Błąd komunikacji'\n                    });\n                  });\n                }\n\n                return _context.abrupt(\"return\", onError(_context.t0, formikHelpers));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      var _this$props2 = _this.props,\n          initialValues = _this$props2.initialValues,\n          _children = _this$props2.children,\n          errorMessage = _this$props2.errorMessage;\n      return /*#__PURE__*/_jsxDEV(StyledComponent, {\n        className: \"layout-forms-form\",\n        children: /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: initialValues,\n          onSubmit: function onSubmit(values, formikHelpers) {\n            return _this.onSubmit(values, formikHelpers);\n          },\n          className: \"form-container\",\n          children: function children(formik) {\n            return /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: formik.handleSubmit,\n              children: [errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-error-message\",\n                children: errorMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 37\n              }, _assertThisInitialized(_this)), _children({\n                formik: formik,\n                errors: {},\n                errorMessage: errorMessage\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 29\n            }, _assertThisInitialized(_this));\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }, _assertThisInitialized(_this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, _assertThisInitialized(_this));\n    });\n\n    return _this;\n  }\n\n  return LayoutFormsForm;\n}(Component);\n\n_defineProperty(LayoutFormsForm, \"defaultProps\", {\n  children: null,\n  errorMessage: null,\n  initialValues: {},\n  onSuccess: function onSuccess(response, formikHelpers) {\n    return response;\n  },\n  onError: function onError(error) {\n    return error;\n  },\n  onSubmitData: function onSubmitData(values) {\n    return values;\n  },\n  submitAction: null\n});\n\nexport { LayoutFormsForm as default };","map":{"version":3,"sources":["/home/bartosz/Pulpit/inz/my-app/src/components/layout/forms/Form/component.tsx"],"names":["Component","Formik","StyledComponent","LayoutFormsForm","errorMessage","values","formikHelpers","props","submitAction","onSubmitData","onSuccess","onError","response","console","error","Object","keys","payload","validationErrors","length","setErrors","setState","prevState","initialValues","children","onSubmit","formik","handleSubmit","errors"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAAqC,OAArC;AACA,SAAeC,MAAf,QAA4C,QAA5C;AAIA,OAAOC,eAAP,MAA4B,UAA5B;;;IAEqBC,e;;;;;;;;;;;;;;;;4DAUF;AACXC,MAAAA,YAAY,EAAE;AADH,K;;;0EAIJ,iBAAOC,MAAP,EAAuBC,aAAvB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,8BACoD,MAAKC,KADzD,EACCC,YADD,eACCA,YADD,EACeC,YADf,eACeA,YADf,EAC6BC,SAD7B,eAC6BA,SAD7B,EACwCC,OADxC,eACwCA,OADxC;AAAA;AAAA;AAAA,uBAIoBH,YAAY,mBAC5BC,YAAY,CAACJ,MAAD,CADgB,EAJhC;;AAAA;AAIGO,gBAAAA,QAJH;AAAA,iDAQIF,SAAS,CAACE,QAAD,EAAWN,aAAX,CARb;;AAAA;AAAA;AAAA;AAUHO,gBAAAA,OAAO,CAACC,KAAR;;AACA,oBAAIC,MAAM,CAACC,IAAP,6EAAY,YAAOC,OAAnB,mDAAY,eAAgBC,gBAA5B,EAA8CC,MAA9C,GAAuD,CAA3D,EAA8D;AAC1Db,kBAAAA,aAAa,CAACc,SAAd,CAAwB,YAAMH,OAAN,CAAcC,gBAAtC;AACH,iBAFD,MAEO;AACH,wBAAKG,QAAL,CAAc,UAACC,SAAD;AAAA,2DACPA,SADO;AAEVlB,sBAAAA,YAAY,EAAE;AAFJ;AAAA,mBAAd;AAIH;;AAlBE,iDAoBIO,OAAO,cAAQL,aAAR,CApBX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;6DAwBF,YAAiB;AACtB,yBAAkD,MAAKC,KAAvD;AAAA,UAAQgB,aAAR,gBAAQA,aAAR;AAAA,UAAuBC,SAAvB,gBAAuBA,QAAvB;AAAA,UAAiCpB,YAAjC,gBAAiCA,YAAjC;AAEA,0BACI,QAAC,eAAD;AAAiB,QAAA,SAAS,EAAC,mBAA3B;AAAA,+BACI,QAAC,MAAD;AACI,UAAA,aAAa,EAAEmB,aADnB;AAEI,UAAA,QAAQ,EAAE,kBAAClB,MAAD,EAAiBC,aAAjB;AAAA,mBAAuD,MAAKmB,QAAL,CAAcpB,MAAd,EAAsBC,aAAtB,CAAvD;AAAA,WAFd;AAGI,UAAA,SAAS,EAAC,gBAHd;AAAA,oBAKK,kBAAAoB,MAAM,EAAI;AACP,gCACI;AAAM,cAAA,QAAQ,EAAEA,MAAM,CAACC,YAAvB;AAAA,yBACKvB,YAAY,iBACT;AAAK,gBAAA,SAAS,EAAC,oBAAf;AAAA,0BACKA;AADL;AAAA;AAAA;AAAA;AAAA,+CAFR,EAMKoB,SAAQ,CAAC;AAAEE,gBAAAA,MAAM,EAANA,MAAF;AAAUE,gBAAAA,MAAM,EAAE,EAAlB;AAAsBxB,gBAAAA,YAAY,EAAZA;AAAtB,eAAD,CANb;AAAA;AAAA;AAAA;AAAA;AAAA,6CADJ;AAUH;AAhBL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,uCADJ;AAsBH,K;;;;;;EA/DwCJ,S;;gBAAxBG,e,kBACK;AAClBqB,EAAAA,QAAQ,EAAE,IADQ;AAElBpB,EAAAA,YAAY,EAAE,IAFI;AAGlBmB,EAAAA,aAAa,EAAE,EAHG;AAIlBb,EAAAA,SAAS,EAAE,mBAACE,QAAD,EAAmBN,aAAnB;AAAA,WAA8DM,QAA9D;AAAA,GAJO;AAKlBD,EAAAA,OAAO,EAAE,iBAACG,KAAD;AAAA,WAAwBA,KAAxB;AAAA,GALS;AAMlBL,EAAAA,YAAY,EAAE,sBAACJ,MAAD;AAAA,WAA4BA,MAA5B;AAAA,GANI;AAOlBG,EAAAA,YAAY,EAAE;AAPI,C;;SADLL,e","sourcesContent":["import { Component, ReactNode } from 'react';\nimport { Form, Formik, FormikHelpers } from 'formik';\n\nimport { Props, State } from './index';\n\nimport StyledComponent from './styles';\n\nexport default class LayoutFormsForm extends Component<Props> {\n    static defaultProps = {\n        children: null,\n        errorMessage: null,\n        initialValues: {},\n        onSuccess: (response: object, formikHelpers: FormikHelpers<any>): any => response,\n        onError: (error: object): any => error,\n        onSubmitData: (values: object): object => values,\n        submitAction: null,\n    };\n    state: State = {\n        errorMessage: null,\n    }\n\n    onSubmit = async (values: object, formikHelpers: FormikHelpers<any>): Promise<any> => {\n        const { submitAction, onSubmitData, onSuccess, onError } = this.props;\n\n        try {\n            const response = await submitAction({\n                ...onSubmitData(values),\n            });\n\n            return onSuccess(response, formikHelpers)\n        } catch (error) {\n            console.error(error);\n            if (Object.keys(error?.payload?.validationErrors).length > 0) {\n                formikHelpers.setErrors(error.payload.validationErrors);\n            } else {\n                this.setState((prevState: State) => ({\n                    ...prevState,\n                    errorMessage: 'Błąd komunikacji',\n                }));\n            }\n\n            return onError(error, formikHelpers);\n        }\n    }\n\n    render = (): ReactNode => {\n        const { initialValues, children, errorMessage } = this.props;\n\n        return (\n            <StyledComponent className=\"layout-forms-form\">\n                <Formik\n                    initialValues={initialValues}\n                    onSubmit={(values: object, formikHelpers: FormikHelpers<any>) => this.onSubmit(values, formikHelpers)}\n                    className=\"form-container\"\n                >\n                    {formik => {\n                        return (\n                            <form onSubmit={formik.handleSubmit}>\n                                {errorMessage && (\n                                    <div className=\"form-error-message\">\n                                        {errorMessage}\n                                    </div>\n                                )}\n                                {children({ formik, errors: {}, errorMessage })}\n                            </form>\n                        )\n                    }}\n                </Formik>\n            </StyledComponent>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}