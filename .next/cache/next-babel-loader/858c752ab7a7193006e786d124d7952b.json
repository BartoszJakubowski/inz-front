{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { HYDRATE } from 'next-redux-wrapper';\nimport * as types from './types';\nimport { INIT_FLAG, SUCCESS_FLAG, FAIL_FLAG } from 'consts/redux';\nimport User from 'models/User';\nimport { API_RESOURCE_ME } from 'consts/apiResources';\nexport var initialState = {\n  authToken: null,\n  profile: null\n};\nexport default function UserReducer() {\n  var _action$payload, _action$payload2, _action$payload2$data, _action$payload3;\n\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HYDRATE:\n      // Attention! This will overwrite client state! Real apps should use proper reconciliation.\n      return _objectSpread(_objectSpread({}, state), action.payload);\n\n    case types.SET_AUTH_TOKEN:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.authToken\n      });\n\n    case types.LOGIN + '_' + INIT_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: null\n      });\n\n    case types.LOGIN + '_' + SUCCESS_FLAG:\n    case types.PASSWORD_CHANGE + '_' + SUCCESS_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : (_action$payload2$data = _action$payload2.data) === null || _action$payload2$data === void 0 ? void 0 : _action$payload2$data.authToken,\n        profile: new User((_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.data[API_RESOURCE_ME])\n      });\n\n    case types.LOGIN + '_' + FAIL_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: null\n      });\n\n    case types.LOGOUT + '_' + SUCCESS_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: null,\n        profile: null\n      });\n\n    case types.LOGOUT + '_' + FAIL_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        authToken: null,\n        profile: null\n      });\n\n    case types.PROFILE_GET + '_' + SUCCESS_FLAG:\n    case types.PROFILE_UPDATE + '_' + SUCCESS_FLAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        profile: new User(action.payload.data[API_RESOURCE_ME])\n      });\n\n    default:\n      return state;\n  }\n}\n_c = UserReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserReducer\");","map":{"version":3,"sources":["/home/bartosz/Pulpit/inz/my-app/src/store/modules/user/reducer.ts"],"names":["HYDRATE","types","INIT_FLAG","SUCCESS_FLAG","FAIL_FLAG","User","API_RESOURCE_ME","initialState","authToken","profile","UserReducer","state","action","type","payload","SET_AUTH_TOKEN","LOGIN","PASSWORD_CHANGE","data","LOGOUT","PROFILE_GET","PROFILE_UPDATE"],"mappings":";;;;;;AAAA,SAASA,OAAT,QAAwB,oBAAxB;AAEA,OAAO,KAAKC,KAAZ,MAAuB,SAAvB;AACA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,SAAlC,QAAmD,cAAnD;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEA,SAASC,eAAT,QAAgC,qBAAhC;AAOA,OAAO,IAAMC,YAAY,GAAG;AACxBC,EAAAA,SAAS,EAAE,IADa;AAExBC,EAAAA,OAAO,EAAE;AAFe,CAArB;AAKP,eAAe,SAASC,WAAT,GAAoE;AAAA;;AAAA,MAA/CC,KAA+C,uEAAhCJ,YAAgC;AAAA,MAAlBK,MAAkB;;AAC/E,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKb,OAAL;AACI;AACA,6CAAYW,KAAZ,GAAsBC,MAAM,CAACE,OAA7B;;AAEJ,SAAKb,KAAK,CAACc,cAAX;AACI,6CACOJ,KADP;AAEIH,QAAAA,SAAS,qBAAEI,MAAM,CAACE,OAAT,oDAAE,gBAAgBN;AAF/B;;AAKJ,SAAKP,KAAK,CAACe,KAAN,GAAc,GAAd,GAAoBd,SAAzB;AACI,6CACOS,KADP;AAEIH,QAAAA,SAAS,EAAE;AAFf;;AAIJ,SAAKP,KAAK,CAACe,KAAN,GAAc,GAAd,GAAoBb,YAAzB;AACA,SAAKF,KAAK,CAACgB,eAAN,GAAwB,GAAxB,GAA8Bd,YAAnC;AACI,6CACOQ,KADP;AAEIH,QAAAA,SAAS,sBAAEI,MAAM,CAACE,OAAT,8EAAE,iBAAgBI,IAAlB,0DAAE,sBAAsBV,SAFrC;AAGIC,QAAAA,OAAO,EAAE,IAAIJ,IAAJ,qBAASO,MAAM,CAACE,OAAhB,qDAAS,iBAAgBI,IAAhB,CAAqBZ,eAArB,CAAT;AAHb;;AAMJ,SAAKL,KAAK,CAACe,KAAN,GAAc,GAAd,GAAoBZ,SAAzB;AACI,6CACOO,KADP;AAEIH,QAAAA,SAAS,EAAE;AAFf;;AAKJ,SAAKP,KAAK,CAACkB,MAAN,GAAe,GAAf,GAAqBhB,YAA1B;AACI,6CACOQ,KADP;AAEIH,QAAAA,SAAS,EAAE,IAFf;AAGIC,QAAAA,OAAO,EAAE;AAHb;;AAKJ,SAAKR,KAAK,CAACkB,MAAN,GAAe,GAAf,GAAqBf,SAA1B;AACI,6CACOO,KADP;AAEIH,QAAAA,SAAS,EAAE,IAFf;AAGIC,QAAAA,OAAO,EAAE;AAHb;;AAMJ,SAAKR,KAAK,CAACmB,WAAN,GAAoB,GAApB,GAA0BjB,YAA/B;AACA,SAAKF,KAAK,CAACoB,cAAN,GAAuB,GAAvB,GAA6BlB,YAAlC;AACI,6CACOQ,KADP;AAEIF,QAAAA,OAAO,EAAE,IAAIJ,IAAJ,CAASO,MAAM,CAACE,OAAP,CAAeI,IAAf,CAAoBZ,eAApB,CAAT;AAFb;;AAKJ;AACI,aAAOK,KAAP;AAnDR;AAqDH;KAtDuBD,W","sourcesContent":["import { HYDRATE } from 'next-redux-wrapper';\n\nimport * as types from './types';\nimport { INIT_FLAG, SUCCESS_FLAG, FAIL_FLAG } from 'consts/redux';\nimport User from 'models/User';\n\nimport { API_RESOURCE_ME } from 'consts/apiResources';\n\nexport interface State {\n    authToken?: string;\n    profile?: User;\n}\n\nexport const initialState = {\n    authToken: null,\n    profile: null,\n};\n\nexport default function UserReducer(state: State = initialState, action: any): any {\n    switch (action.type) {\n        case HYDRATE:\n            // Attention! This will overwrite client state! Real apps should use proper reconciliation.\n            return { ...state, ...action.payload };\n\n        case types.SET_AUTH_TOKEN:\n            return {\n                ...state,\n                authToken: action.payload?.authToken,\n            };\n\n        case types.LOGIN + '_' + INIT_FLAG:\n            return {\n                ...state,\n                authToken: null,\n            };\n        case types.LOGIN + '_' + SUCCESS_FLAG:\n        case types.PASSWORD_CHANGE + '_' + SUCCESS_FLAG:\n            return {\n                ...state,\n                authToken: action.payload?.data?.authToken,\n                profile: new User(action.payload?.data[API_RESOURCE_ME]),\n            };\n\n        case types.LOGIN + '_' + FAIL_FLAG:\n            return {\n                ...state,\n                authToken: null,\n            };\n\n        case types.LOGOUT + '_' + SUCCESS_FLAG:\n            return {\n                ...state,\n                authToken: null,\n                profile: null,\n            };\n        case types.LOGOUT + '_' + FAIL_FLAG:\n            return {\n                ...state,\n                authToken: null,\n                profile: null,\n            };\n\n        case types.PROFILE_GET + '_' + SUCCESS_FLAG:\n        case types.PROFILE_UPDATE + '_' + SUCCESS_FLAG:\n            return {\n                ...state,\n                profile: new User(action.payload.data[API_RESOURCE_ME]),\n            };\n\n        default:\n            return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}